<div class="npc-block contact-info-block">
  <h2 class="mb-24">Contact Information</h2>
  <form [formGroup]="contactDetailsForm" *ngIf="contactType === 'individual'" autocomplete="false">
    <div class="pb-24">
      <div class="row gutter-16">
        <div class="col-12">
          <div class="row gutter-16">
            <div class="row w-100">
              <div class="col-2">
                <div class="form-group">
                  <label>Contact Number</label>
                  <input type="text" formControlName="uniqueNumber" [readOnly]="true" class="form-control" id="uniqueNumberId">
                </div>
              </div>
              <div class="col-3">
                <div class="form-group">
                  <label>Gender</label>
                  <ng-select [items]="genderList" placeholder="Select" formControlName="gender" [bindValue]="'val'"
                             [bindLabel]="'text'" [selectOnTab]="true" [notFoundText]="'No record found'" id="genderId">
                  </ng-select>
                </div>
              </div>
              <div class="col-3">
                <div class="form-group">
                  <label>Suffix</label>

                  <ng-select [items]="suffixList" [bindLabel]="'name'" [bindValue]="'name'"
                             [selectOnTab]="true" formControlName="suffix" placeholder="Select" id="suffixId">
                  </ng-select>
                </div>
              </div>
              <div class="col-3">
                <div class="form-group">
                  <label>Salutation</label>
                  <ng-select [items]="salutationArr" placeholder="Select" formControlName="salutation"
                             [bindValue]="'name'" [selectOnTab]="true" [bindLabel]="'name'" [notFoundText]="'No record found'" id="salutationId">
                  </ng-select>
                </div>
              </div>
            </div>
            <div class="row w-100">
              <div class="col-3">
                <div class="form-group"
                     [class.has-error]="f['firstName'].errors && (f['firstName'].touched || formSubmitted)">
                  <label>First Name <sup>*</sup></label>
                  <input type="text" formControlName="firstName" class="form-control" placeholder="Enter First Name" autocomplete="doNotAutoComplete" id="firstnameId">
                  <span class="field-message text-danger"
                        *ngIf="f['firstName'].errors?.required && (f['firstName'].touched || formSubmitted)">
                    <em class="icon icon-error mr-4"></em>
                    {{ errorData?.first_name_error }}
                  </span>
                  <span class="field-message text-danger" *ngIf="f['firstName'].errors?.insecure_input && (!f['firstName'].pristine || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.insecure_input }}
                  </span>
                </div>
              </div>
              <div class="col-3">
                <div class="form-group" [class.has-error]="f['middleName'].errors && (f['middleName'].touched || formSubmitted)">
                  <label>Middle Name</label>
                  <input type="text" formControlName="middleName" class="form-control fakeClass" placeholder="Enter Middle Name" autocomplete="doNotAutoComplete" id="middleNameId">
                  <span class="field-message text-danger" *ngIf="f['middleName'].errors && (!f['middleName'].pristine || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.insecure_input }}
                  </span>
                </div>
              </div>
              <div class="col-3">
                <div class="form-group"
                     [class.has-error]="f['lastName'].errors && (f['lastName'].touched || formSubmitted)">
                  <label>Last Name <sup>*</sup></label>
                  <input type="text" formControlName="lastName" class="form-control fakeClass" placeholder="Enter Last Name" autocomplete="doNotAutoComplete" id="lastNameId">
                  <span class="field-message text-danger"
                        *ngIf="f['lastName'].errors?.required && (f['lastName'].touched || formSubmitted)">
                    <em class="icon icon-error mr-4"></em>
                    {{ errorData?.last_name_error }}
                  </span>
                  <span class="field-message text-danger" *ngIf="f['lastName'].errors?.insecure_input && (!f['lastName'].pristine || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.insecure_input }}
                  </span>
                </div>
              </div>
            </div>
            <div class="row w-100">
              <div class="col-3">
                <div class="form-group" [class.has-error]="f['formerName'].errors && (f['formerName'].touched || formSubmitted)">
                  <label>Former Name</label>
                  <input type="text" class="form-control" formControlName="formerName" placeholder="Enter Former Name" autocomplete="doNotAutoComplete" id="formerNameId">
                  <span class="field-message text-danger" *ngIf="f['formerName'].errors && (!f['formerName'].pristine || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.insecure_input }}
                  </span>
                </div>
              </div>
              <div class="col-2">
                <div class="form-group"
                     [class.has-error]="f['initialContactDate'].errors && (f['initialContactDate'].touched || formSubmitted)">
                  <label>Initial Contact Date <sup>*</sup></label>
                  <app-date-picker [isForm]='true' [maxDate]="currentDate" [dateform]='contactDetailsForm'
                                   controlName='initialContactDate' id="initialContactDateId"></app-date-picker>
                  <span class="field-message text-danger"
                        *ngIf="f['initialContactDate'].errors && (f['initialContactDate'].touched || formSubmitted)">
                    <em class="icon icon-error mr-4"></em>
                    {{ errorData?.potential_client_initial_contact_date }}
                  </span>
                </div>
              </div>
            </div>



            <ng-container *ngIf="isTuckerAllenAccount">
              <div class="col-12">
                <div class="custom-control custom-checkbox pr-0 mb-24">
                          <input type="checkbox" class="custom-control-input" formControlName="isDeceased" id="contactDeceased">
                          <label class="custom-control-label text-transform-none" for="contactDeceased">The Client is Deceased.</label>
                      </div>
                </div>
            <div class="col-12">
              <div class="row gutter-16">
                <div class="col-4">
                  <div class="form-group" [class.has-error]="f['spouseFirstName'].errors && (f['spouseFirstName'].touched || formSubmitted)">
                    <label>Spouse First Name</label>
                    <input type="text" class="form-control" formControlName="spouseFirstName" placeholder="Enter First Name" autocomplete="doNotAutoComplete" id="spouseFirstNameId">
                    <span class="field-message text-danger" *ngIf="f['spouseFirstName'].errors && (!f['spouseFirstName'].pristine || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.insecure_input }}
                    </span>
                </div>
                </div>
                <div class="col-4">
                  <div class="form-group" [class.has-error]="f['spouseMiddleName'].errors && (f['spouseMiddleName'].touched || formSubmitted)">
                    <label>Spouse Middle Name</label>
                    <input type="text" class="form-control" formControlName="spouseMiddleName" placeholder="Enter Middle Name"
                    autocomplete="doNotAutoComplete" id="spouseMiddleNameId">
                    <span class="field-message text-danger" *ngIf="f['spouseMiddleName'].errors && (!f['spouseMiddleName'].pristine || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.insecure_input }}
                    </span>
                </div>
              </div>
                <div class="col-4">
                  <div class="form-group" [class.has-error]="f['spouseLastName'].errors && (f['spouseLastName'].touched || formSubmitted)">
                    <label>Spouse Last Name</label>
                    <input type="text" class="form-control" formControlName="spouseLastName" placeholder="Enter Last Name" autocomplete="doNotAutoComplete" id="spouseLastNameId">
                    <span class="field-message text-danger" *ngIf="f['spouseLastName'].errors && (!f['spouseLastName'].pristine || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.insecure_input }}
                    </span>
                </div>
              </div>
                <div class="col-4">
                  <div class="form-group">
                    <label>Spouse Gender</label>
                    <ng-select [selectOnTab]="true" [items]="genderList" placeholder="Select" [bindValue]="'val'"
                      [bindLabel]="'text'" formControlName="spouseGender" [notFoundText]="'No record found'" id="spouseGenderId">
                    </ng-select>
                </div>
              </div>
              </div>
            </div>
              <div class="col-12">
                <div class="custom-control custom-checkbox pr-0 mb-20">
                          <input type="checkbox" class="custom-control-input" formControlName="spouseIsDeceased" id="spousedeceased">
                          <label class="custom-control-label text-transform-none" for="spousedeceased">The Spouse is Deceased.</label>
                      </div>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col-4">
                  <div class="form-group" [class.has-error]="f['prospectFirstName'].errors && (f['prospectFirstName'].touched || formSubmitted)">
                    <label>Other Prospect First Name</label>
                    <input type="text" class="form-control" formControlName="prospectFirstName" placeholder="Enter First Name" autocomplete="doNotAutoComplete" id="prospectFirstNameId">
                    <span class="field-message text-danger" *ngIf="f['prospectFirstName'].errors && (!f['prospectFirstName'].pristine || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.insecure_input }}
                    </span>
                </div>
              </div>
              <div class="col-4">
                  <div class="form-group" [class.has-error]="f['prospectMiddleName'].errors && (f['prospectMiddleName'].touched || formSubmitted)">
                    <label>Other Prospect Middle Name</label>
                    <input type="text" formControlName="prospectMiddleName" class="form-control" placeholder="Enter Middle Name" autocomplete="doNotAutoComplete" id="prospectMiddleNameId">
                    <span class="field-message text-danger" *ngIf="f['prospectMiddleName'].errors && (!f['prospectMiddleName'].pristine || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.insecure_input }}
                    </span>
                </div>
              </div>
              <div class="col-4">
                  <div class="form-group" [class.has-error]="f['prospectLastName'].errors && (f['prospectLastName'].touched || formSubmitted)">
                    <label>Other Prospect Last Name</label>
                    <input type="text" formControlName="prospectLastName" class="form-control" placeholder="Enter Last Name" autocomplete="doNotAutoComplete" id="prospectLastNameId">
                    <span class="field-message text-danger" *ngIf="f['prospectLastName'].errors && (!f['prospectLastName'].pristine || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.insecure_input }}
                    </span>
                </div>
              </div>
              </div>
            </div>
            <div class="col-4">
                <div class="form-group">
                  <label>Other Prospect Gender</label>
                  <ng-select [selectOnTab]="true" [items]="genderList" placeholder="Select" [bindValue]="'val'"
                    [bindLabel]="'text'" formControlName="prospectGender" [notFoundText]="'No record found'" id="prospectGenderId">
                  </ng-select>
              </div>
            </div>
            <div class="col-8">
              <div class="form-group" [class.has-error]="f['prospectRelationship'].errors && (f['prospectRelationship'].touched || formSubmitted)">
                <label>Other Prospect Relationship</label>
                <input type="text" formControlName="prospectRelationship" class="form-control" placeholder="Enter Prospect Relationship" autocomplete="doNotAutoComplete" id="prospectRelationshipId">
                <span class="field-message text-danger" *ngIf="f['prospectRelationship'].errors && (!f['prospectRelationship'].pristine || formSubmitted)">
                    <em class="icon icon-error mr-4"></em>
                    {{ errorData?.insecure_input }}
                </span>
            </div>
          </div>
            <div class="col-12">
              <div class="custom-control custom-checkbox pr-0 mb-24">
                  <input type="checkbox" class="custom-control-input" formControlName="prospectIsDeceased" id="prospectDeceased">
                  <label class="custom-control-label text-transform-none" for="prospectDeceased">Other Prospect is Deceased.</label>
              </div>
            </div>
            </ng-container>



          </div>
        </div>
      </div>
    </div>
    <div class="pb-24 cont-detail">
      <div class="row gutter-16">
        <div class="col-6">
          <h3 class="mb-24">Contact Details</h3>
          <div class="row gutter-16">
            <div class="col-6">
              <div class="form-group"
                [class.has-error]="f['primaryPhoneNumber'].errors && (f['primaryPhoneNumber'].touched || formSubmitted)">
                <label>Primary Phone Number <sup>*</sup></label>
                <input type="text" class="form-control" formControlName="primaryPhoneNumber" placeholder="(     )   -  "
                  mask="(000) 000 - 0000" autocomplete="doNotAutoComplete" id="primaryPhoneNumberId">
                <span class="field-message text-danger"
                  *ngIf="f['primaryPhoneNumber'].errors && (f['primaryPhoneNumber'].touched || formSubmitted)">
                  <em class="icon icon-error mr-4"></em>
                  {{ errorData?.potential_client_corporate_contact_phone }}
                </span>
              </div>
            </div>
            <div class="col-6">
              <div class="form-group"
                [class.has-error]="f['cellPhoneNumber'].errors && (f['cellPhoneNumber'].touched || formSubmitted)">
                <label>Cell Phone Number </label>
                <input type="text" formControlName="cellPhoneNumber" class="form-control" placeholder="(     )   -   "
                  mask="(000) 000 - 0000" autocomplete="doNotAutoComplete" id="cellPhoneNumberId">
                  <span class="field-message text-danger"
                  *ngIf="f['cellPhoneNumber'].errors && (f['cellPhoneNumber'].touched || formSubmitted)">
                  <em class="icon icon-error mr-4"></em>
                  {{ errorData?.invalid_phone }}
                </span>
              </div>
            </div>
            <div class="col-6">
              <div class="form-group"
                   [class.has-error]="(f['email'].errors && (f['email'].touched || formSubmitted)) || emailExistenceForPotentialClient">
                <label>Email Address</label>
                <input type="email" formControlName="email" class="form-control" placeholder="Enter Email"
                  (keyup)="onEmailChange(preferredContactMethodEmail, automaticNotifyEmail)" autocomplete="doNotAutoComplete" (blur)="checkEmailExistenceForPotentialClient()" id="emailId">
                <span class="field-message text-danger"
                  *ngIf="f['email'].errors?.required && (f['email'].touched || formSubmitted)">
                  <em class="icon icon-error mr-4"></em>
                  {{ errorData?.potential_client_email_required }}
                </span>
                <span class="field-message text-danger"
                  *ngIf="f['email'].errors?.pattern && (f['email'].touched || formSubmitted)">
                  <em class="icon icon-error mr-4"></em>
                  {{ errorData?.email_not_valid }}
                </span>
                <span class="field-message text-danger"
                      *ngIf="emailExistenceForPotentialClient">
                  <em class="icon icon-error mr-4"></em>
                  {{ errorData?.potential_client_email_in_use }}
                </span>
                <span class="field-message text-danger" *ngIf="f['email'].errors?.insecure_input && (!f['email'].pristine || formSubmitted)">
                    <em class="icon icon-error mr-4"></em>
                    {{ errorData?.insecure_input }}
                </span>
              </div>
            </div>
          </div>
          <div class="row gutter-16 pt-8">
            <div class="col-9">
              <h3 class="mb-24">Primary Address</h3>
              <div class="row gutter-16">
                <div class="col-12">
                  <div class="form-group"
                    [class.has-error]="f['primaryAddress'].errors && (f['primaryAddress'].touched || formSubmitted)">
                    <label>Primary Address 1 <sup>*</sup></label>
                    <input type="text" formControlName="primaryAddress" class="form-control"
                      placeholder="Enter Street Address" autocomplete="doNotAutoComplete" id="primaryAddressId">
                    <span class="field-message text-danger"
                      *ngIf="f['primaryAddress'].errors?.required && (f['primaryAddress'].touched || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.potential_client_corporate_contact_address }}
                    </span>
                    <span class="field-message text-danger" *ngIf="f['primaryAddress'].errors?.insecure_input && (!f['primaryAddress'].pristine || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.insecure_input }}
                    </span>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-group" [class.has-error]="f['primaryAddress2'].errors && (f['primaryAddress2'].touched || formSubmitted)">
                    <label>Primary Address 2</label>
                    <input type="text" formControlName="primaryAddress2" class="form-control"
                      placeholder="Enter Unit or Suite #" autocomplete="doNotAutoComplete" id="primaryAddress2Id">
                    <span class="field-message text-danger" *ngIf="f['primaryAddress2'].errors && (!f['primaryAddress2'].pristine || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.insecure_input }}
                    </span>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-group"
                    [class.has-error]="(f['primaryZipCode'].errors && (f['primaryZipCode'].touched || formSubmitted) && !validZipErr) || (formSubmitted && validZipErr)">
                    <label>ZIP Code <sup>*</sup></label>
                    <input type="text"
                      maxlength="6"
                      minlength="3"
                      formControlName="primaryZipCode"
                      (keyup)="getCityState($event?.target?.value)"
                      (keypress)="checkNumber($event)"
                      class="form-control"
                      placeholder="Enter ZIP Code"
                      autocomplete="doNotAutoComplete"
                      id="primaryZipCodeId">
                    <span class="field-message text-danger"
                      *ngIf="(f['primaryZipCode'].errors && (f['primaryZipCode'].touched || formSubmitted)) && !validZipErr">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.zip_code_required }}
                    </span>
                    <span class="field-message text-danger" *ngIf="formSubmitted && validZipErr">
                      <em class="icon icon-error mr-4"></em>
                      {{errorData?.zip_code_error}}
                    </span>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-group">
                    <label>State <sup>*</sup></label>
                    <ng-select *ngIf="stateList?.length > 1"
                      [items]="stateList"
                      placeholder="State"
                      formControlName="primaryState"
                      [notFoundText]="'No record found'"
                      [selectOnTab]="true"
                      [clearable]="false"
                      [bindValue]="'code'"
                      [bindLabel]="'name'"
                      id="primaryStateId">
                    </ng-select>
                    <input *ngIf="stateList?.length <= 1"
                      type="text"
                      class="form-control"
                      placeholder="State"
                      [(ngModel)]="singleState"
                      [ngModelOptions]="{standalone: true}"
                      [readOnly]='true' id="state">
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-group">
                    <label>City <sup>*</sup></label>
                    <ng-select *ngIf="cityList?.length > 1"
                      [items]="cityList"
                      placeholder="City"
                      [clearable]="false"
                      formControlName="primaryCity"
                      [notFoundText]="'No record found'"
                      [selectOnTab]="true" id="city">
                    </ng-select>
                    <input *ngIf="cityList?.length <= 1"
                      type="text"
                      formControlName="primaryCity"
                      class="form-control"
                      placeholder="City"
                      autocomplete="doNotAutoComplete"
                      [readOnly]='true' id="primaryCityId">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="pb-24 cont-pref">
      <div class="row gutter-16">
        <div class="col-7">
          <h3 class="mb-24">Contact Preferences</h3>
          <div class="row">
            <div class="col-5">
              <div class="form-group">
                <div class="custom-control custom-checkbox mb-16 mt-4 pr-0">
                  <input type="checkbox" (change)="changeDonotContact(preferredContactMethodEmail, automaticNotifyEmail)" formControlName="doNotContact"
                    class="custom-control-input" id="dropcheck-contact">
                  <label class="custom-control-label text-transform-none" for="dropcheck-contact">Mark as Do Not Contact</label>
                </div>
              </div>
              <div class="form-group"
                [class.has-error]="f['doNotContactReason'].errors && (f['doNotContactReason'].touched || formSubmitted)">
                <label for="">Do Not Contact Reason <sup *ngIf="contactDetailsForm.value.doNotContact">*</sup></label>
                <ng-select [items]="doNotContactReasonArr" placeholder="Select a reason"
                  formControlName="doNotContactReason" [bindValue]="'name'" [bindLabel]="'name'"
                  [notFoundText]="'No record found'" [selectOnTab]="true" (change)="selectDoNotContactReason()" id="doNotContactReasonId">
                </ng-select>
                <span class="field-message text-danger"
                  *ngIf="f['doNotContactReason'].errors?.required  && formSubmitted">
                  <em class="icon icon-error mr-4"></em>
                  {{ errorData?.do_not_contact_select_reason }}
                </span>
              </div>
            </div>
            <div class="col-5 mt-48">
              <div class="form-group" *ngIf="contactDetailsForm.controls.doNotContactReason.value =='Other'"
                [class.has-error]="f['DoNotContactReasonOther'].errors && (f['DoNotContactReasonOther'].touched || formSubmitted)">
                <label>Reason <sup>*</sup></label>
                <input type="text" class="form-control" placeholder="Enter Do Not Contact Reason"
                  formControlName="DoNotContactReasonOther" autocomplete="doNotAutoComplete" id="DoNotContactReasonOtherId">
                  <span class="field-message text-danger"
                    *ngIf="f['DoNotContactReasonOther'].errors?.required && (c['DoNotContactReasonOther'].touched || formSubmitted)">
                    <em class="icon icon-error mr-4"></em>
                    {{ errorData?.do_not_contact_enter_reason }}
                  </span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-6">
            <label class="d-block mb-16">Preferred Contact Method <sup *ngIf="!contactDetailsForm.value.doNotContact">*</sup></label>
              <div class="custom-control custom-radio">
                <input formControlName="preferredContactMethod" value="Call" type="radio" id="customradio_1"
                  class="custom-control-input">
                <label class="custom-control-label" for="customradio_1">Call</label>
              </div>
              <div class="custom-control custom-radio">
                <input #preferredContactMethodEmail formControlName="preferredContactMethod" [attr.disabled]="f['email'].errors || !f['email'].value ? '' : null" value="Email" type="radio" id="customradio_2"
                  class="custom-control-input">
                <label class="custom-control-label" for="customradio_2">Email</label>
              </div>
              <div class="custom-control custom-radio" *ngIf="userInfo?.tenantTier?.tierName != tenantTier.Emerging">
                <input formControlName="preferredContactMethod" value="Text" type="radio" id="customradio_3"
                  class="custom-control-input">
                <label class="custom-control-label" for="customradio_3">Text</label>
              </div>
              <span class="text-danger" *ngIf="f['preferredContactMethod'].errors?.required && formSubmitted">
                <em class="icon icon-error mr-4"></em>
                {{ errorData?.potential_client_preferred_contact_method }}
              </span>
            </div>
            <div class="col-6">
              <label class="d-block mb-16">Automatic Notifications</label>
              <div class="custom-control custom-checkbox">
                <input #automaticNotifyEmail type="checkbox" [attr.disabled]="f['email'].errors || !f['email'].value ? '' : null" formControlName="notifyEmail" id="notifyEmail_email_id"
                  class="custom-control-input">
                <label class="custom-control-label" for="notifyEmail_email_id">Email</label>
              </div>
              <div class="custom-control custom-checkbox" *ngIf="userInfo?.tenantTier?.tierName != tenantTier.Emerging">
                <input type="checkbox" formControlName="notifySMS" id="notifySmS_sms_id" class="custom-control-input">
                <label class="custom-control-label" for="notifySmS_sms_id">Text</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div>
      <div class="row gutter-16">
        <div class="col-6">
          <h3 class="mb-28">Next Action</h3>
          <div class="form-group">
            <label class="mb-20 d-block">Are there any pending next actions on this client that the attorney needs to be aware of?</label>
            <div class="custom-control custom-radio">
              <input type="radio" con id="next_act_1" class="custom-control-input" value="no"
                formControlName="initialConsultations" (change)="setValidatorNextActionFields()">
              <label class="custom-control-label" for="next_act_1">No</label>
            </div>
            <div class="custom-control custom-radio">
              <input type="radio" id="next_act_2" class="custom-control-input" value="yes"
                formControlName="initialConsultations" (change)="setValidatorNextActionFields()">
              <label class="custom-control-label" for="next_act_2">Yes</label>
            </div>
            <div *ngIf="contactDetailsForm?.value?.initialConsultations === 'yes'">
              <div class="row gutter-16">
                <div class="col-4">
                  <div class="form-group" [class.has-error]="f['nextActionDate'].errors && formSubmitted">
                    <label>Next Action Date <sup>*</sup></label>
                    <app-date-picker [isForm]='true' [dateform]='contactDetailsForm' controlName='nextActionDate' id="nextActionDateId">
                    </app-date-picker>
                    <span class="field-message text-danger d-flex align-items-start" *ngIf="formSubmitted && f['nextActionDate'].errors?.required">
                      <em class="icon icon-error mr-4 mt-0"></em>
                      Please select date.
                    </span>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12">
                  <div class="form-group" [class.has-error]="f['nextActionNote'].errors && formSubmitted">
                    <label>Next Action Notes <sup>*</sup></label>
                    <textarea class="form-control" rows="4" placeholder="Enter Notes"
                      formControlName="nextActionNote" id="nextActionNoteId"></textarea>
                    <span class="field-message text-danger d-flex align-items-start" *ngIf="formSubmitted && f['nextActionNote'].errors?.required">
                      <em class="icon icon-error mr-4 mt-0"></em>
                      Please enter notes.
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
  <div *ngIf="contactType === 'corporate'">
    <form [formGroup]="corporateContactForm" autocomplete="off">

      <div class="">
        <div class="">
          <div class="info-block">
            <div class="row gutter-16">
              <div class="col-8">
                <div class="row gutter-16">
                  <div class="col-md-3">
                    <div class="form-group">
                      <label>Contact Number</label>
                      <input type="text" class="form-control" [readOnly]="true"
                             formControlName="uniqueNumber" autocomplete="doNotAutoComplete" id="uniqueNumberId">
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-group"
                      [class.has-error]="c['companyName'].errors && (c['companyName'].touched || formSubmitted)">
                      <label>Company Name <sup>*</sup></label>
                      <input type="text" class="form-control" placeholder="Enter Company Name"
                        formControlName="companyName" autocomplete="doNotAutoComplete" id="companyNameId">
                      <span class="field-message text-danger"
                        *ngIf="c['companyName'].errors?.required && (c['companyName'].touched || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.first_name_error }}
                      </span>
                      <span class="field-message text-danger"
                        *ngIf="c['companyName'].errors?.insecure_input && (c['companyName'].touched || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.insecure_input }}
                      </span>
                    </div>
                  </div>
                  <div class="col-3">
                    <div class="form-group"
                      [class.has-error]="c['initialContactDate'].errors && (c['initialContactDate'].touched || formSubmitted)">
                      <label>Contact Date <sup>*</sup></label>
                      <app-date-picker [isForm]='true' [maxDate]="currentDate" [dateform]='corporateContactForm'
                        controlName='initialContactDate' id="initialContactDateId">
                      </app-date-picker>
                      <span class="field-message text-danger"
                        *ngIf="c['initialContactDate'].errors && (c['initialContactDate'].touched || formSubmitted)">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.potential_client_initial_contact_date }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>



      <div class=" ">
        <div class="">
          <h3 class="mb-24">Contact Detail</h3>
          <div class="row gutter-16">
            <div class="col-10">
              <div class="row gutter-16">
                <div class="col-12">
                  <div class="row gutter-16">
                    <div class="col-5">
                      <div class="row gutter-16">
                        <div class="col-12">
                          <h4>Primary Address</h4>
                        </div>
                        <div class="col-12">
                          <div class="form-group"
                            [class.has-error]="c['primaryAddress'].errors && (c['primaryAddress'].touched || formSubmitted)">
                            <label>Primary Address 1 <sup>*</sup></label>
                            <input type="text" class="form-control" placeholder="Enter Street Address"
                              formControlName="primaryAddress" autocomplete="doNotAutoComplete" id="primaryAddressId">
                            <span class="field-message text-danger"
                              *ngIf="c['primaryAddress'].errors?.required && (c['primaryAddress'].touched || formSubmitted)" autocomplete="new-password">
                              <em class="icon icon-error mr-4"></em>
                              {{ errorData?.potential_client_corporate_contact_address }}
                            </span>
                            <span class="field-message text-danger"
                              *ngIf="c['primaryAddress'].errors?.insecure_input && (c['primaryAddress'].touched || formSubmitted)" autocomplete="new-password">
                              <em class="icon icon-error mr-4"></em>
                              {{ errorData?.insecure_input }}
                            </span>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="form-group" [class.has-error]="c['primaryAddress2'].errors && (c['primaryAddress'].touched || formSubmitted)">
                            <label>Primary Address 2 </label>
                            <input type="text" class="form-control" placeholder="Enter Unit or Suite #"
                              formControlName="primaryAddress2" autocomplete="doNotAutoComplete" id="primaryAddress2Id">
                              <span class="field-message text-danger"
                              *ngIf="c['primaryAddress2'].errors && (c['primaryAddress2'].touched || formSubmitted)" autocomplete="new-password">
                                <em class="icon icon-error mr-4"></em>
                                {{ errorData?.insecure_input }}
                              </span>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="row gutter-16">
                            <div class="col-6">
                              <div class="form-group"
                                [class.has-error]="(c['primaryZipCode'].errors && (c['primaryZipCode'].touched || formSubmitted) && !validZipErr) || (formSubmitted && validZipErr)">
                                <label>ZIP Code <sup>*</sup></label>
                                <input type="text"
                                  class="form-control"
                                  placeholder=" Enter ZIP Code"
                                  formControlName="primaryZipCode"
                                  maxlength="6"
                                  minlength="3"
                                  (keypress)="checkNumber($event)"
                                  (keyup)="getCityState($event?.target?.value, true)"
                                  autocomplete="new-password"
                                  id="primaryZipCodeId">
                                <span class="field-message text-danger"
                                  *ngIf="(c['primaryZipCode'].errors && (c['primaryZipCode'].touched || formSubmitted)) && !validZipErr">
                                  <em class="icon icon-error mr-4"></em>
                                  {{ errorData?.zip_code_required}}
                                </span>
                                <span class="field-message text-danger" *ngIf="formSubmitted && validZipErr">
                                  <em class="icon icon-error mr-4"></em>
                                  {{errorData?.zip_code_error}}
                                </span>
                              </div>
                            </div>
                            <div class="col-6">
                              <div class="form-group">
                                <label>State <sup>*</sup></label>
                                <ng-select *ngIf="stateList?.length > 1"
                                  [items]="stateList"
                                  placeholder="State"
                                  formControlName="primaryState"
                                  [bindValue]="'code'"
                                  [selectOnTab]="true"
                                  [clearable]="false"
                                  [bindLabel]="'name'"
                                  [notFoundText]="'No record found'"
                                  id="primaryStateId">
                                </ng-select>
                                <input *ngIf="stateList?.length <= 1"
                                  type="text"
                                  class="form-control"
                                  placeholder="State"
                                  [(ngModel)]="singleState"
                                  [ngModelOptions]="{standalone: true}"
                                  [readOnly]='true' id="state">
                              </div>
                            </div>
                            <div class="col-12">
                              <div class="form-group">
                                <label>City <sup>*</sup></label>
                                <input *ngIf="cityList?.length <= 1"
                                  type="text"
                                  class="form-control"
                                  placeholder="City"
                                  formControlName="primaryCity"
                                  autocomplete="doNotAutoComplete"
                                  [readOnly]='true' id="primaryCityId">
                                  <ng-select *ngIf="cityList?.length > 1"
                                    [items]="cityList"
                                    placeholder="City"
                                    [clearable]="false"
                                    formControlName="primaryCity"
                                    [notFoundText]="'No record found'"
                                    [selectOnTab]="true" id="city">
                                  </ng-select>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>



      <div class="">
        <div class="">
          <div class="d-flex">
            <h2 class="mb-24">Corporate Contacts<sup class="text-danger ml-4">*</sup></h2>
            <span class="text-danger mt-12 ml-12"
              *ngIf="(corporateContactList.length === 0 || !hasBothCorporateContacts) && formSubmitted">
              <em class="icon icon-error mr-4"></em>
              {{ errorData?.validation_corporate_contacts_required }}
            </span>
          </div>
          <p>There must be exactly one (1) Primary Contact and Billing Contact assigned to the client.</p>
          <p>Please ensure both of these roles are assigned to the Corporate Contact(they can be the same person).
            Multiple General Counsels are permitted.</p>
          <div class="info-block pt-24" *ngIf="corporateContactList.length">
            <div class="custom-table">
              <div class="table-responsive custom-style-scroll">
                <table class="table table-striped table-borderless" id="corporateContactListId">
                  <thead>
                    <tr>
                      <th>Contact Number</th>
                      <th>Name</th>
                      <th>Job Title</th>
                      <th>Email Address</th>
                      <th>Phone Number</th>
                      <th>Cell Phone Number</th>
                      <th class="text-center">Primary Contact</th>
                      <th class="text-center">Billing Contact</th>
                      <th class="text-center">General Counsel</th>
                      <th class="text-right">Action</th>
                    </tr>
                  </thead>
                  <tbody *ngIf="corporateContactList.length > 0;else no_data_found">
                    <tr *ngFor="let sub of corporateContactList; trackBy:trackByFn;let i=index;" id="corporateContactListId-{{i}}">
                      <td>{{sub.uniqueNumber}}</td>
                      <td>{{sub.lastName + ', ' + sub.firstName}}</td>
                      <td>{{sub.jobTitle}}</td>
                      <td>{{sub.email}}</td>
                      <td>{{sub.primaryPhoneNumber | mask: '(000) 000-0000'}}</td>
                      <td>{{sub.cellPhoneNumber | mask: '(000) 000-0000'}}</td>
                      <td>
                        <div class="d-flex justify-content-center">
                          <div class="custom-control custom-checkbox m-0 pr-0">
                            <input type="checkbox" class="custom-control-input" id="primaryCorpContact_{{i}}"
                              [checked]="sub.isPrimary || sub.code== 'Primary Contact'" disabled>
                            <label class="custom-control-label" for="primaryCorpContact_{{i}}"></label>
                          </div>
                        </div>
                      </td>
                      <td>
                        <div class="d-flex justify-content-center">
                          <div class="custom-control custom-checkbox m-0 pr-0">
                            <input type="checkbox" class="custom-control-input" id="billingCorpContact_{{i}}"
                              [checked]="sub.isBilling || sub.code== 'Billing Contact'" disabled>
                            <label class="custom-control-label" for="billingCorpContact_{{i}}"></label>
                          </div>
                        </div>
                      </td>
                      <td>
                        <div class="d-flex justify-content-center">
                          <div class="custom-control custom-checkbox m-0 pr-0">
                            <input type="checkbox" class="custom-control-input" id="generalCorpContact_{{i}}"
                              [checked]="sub.isGeneralCounsel || sub.code == 'General Counsel'" disabled>
                            <label class="custom-control-label" for="generalCorpContact_{{i}}"></label>
                          </div>
                        </div>
                      </td>
                      <td class="text-right">
                        <div class="icon-group d-flex justify-content-end">
                          <span>
                            <em class="icon icon-edit icon-color"
                              (click)='editVendorClick(i, AddCorporateContact)' id="edit-vendor-index-{{i}}"></em>
                          </span>
                          <span>
                            <em class="icon icon-remove icon-color" (click)='deleteVendorClick(i)' id="delete-vendor-index-{{i}}"></em>
                          </span>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                  <ng-template #no_data_found>
                    <tbody>
                      <tr>
                        <td colspan="8" class="text-center">{{ errorData?.table_no_data_found }}</td>
                      </tr>
                    </tbody>
                  </ng-template>
                </table>
              </div>
            </div>
          </div>
          <button class="btn btn-link btn-icon px-0 d-flex align-items-center mt-24 mb-16" type="button"
            (click)="openPersonalinfo(AddCorporateContact,'lg','', true, true)" id="add-corporate-contact-btn">
            <i class="icon icon-add-circle"></i>Add Corporate Contact
          </button>
        </div>

      </div>




      <div class="">
          <h2 class="mb-24">Contact Preferences</h2>
          <div class="row gutter-16">
            <div class="col-7">
              <div class="row">
                <div class="col-5">
                  <div class="form-group">
                    <div class="custom-control custom-checkbox m-0 pr-0">
                      <input type="checkbox" class="custom-control-input" name="doNotContact" id="doNotContact-123"
                        formControlName="doNotContact" (change)="changeDonotContactCorporate()">
                      <label class="custom-control-label" for="doNotContact-123">Mark as Do Not
                        Contact</label>
                    </div>
                  </div>
                  <div class="form-group"
                  [class.has-error]="c['doNotContactReason'].errors && (c['doNotContactReason'].touched || formSubmitted)">
                    <label>Do Not Contact Reason <sup *ngIf="corporateContactForm.value.doNotContact">*</sup></label>
                    <ng-select [items]="doNotContactReasonArr" placeholder="Select a reason"
                      formControlName="doNotContactReason" [bindValue]="'name'" [bindLabel]="'name'"
                      [notFoundText]="'No record found'" [selectOnTab]="true" (change)="selectDoNotContactReasonCorp()" id="doNotContactReasonId">
                    </ng-select>
                    <span class="field-message text-danger"
                      *ngIf="c['doNotContactReason'].errors && (c['doNotContactReason'].touched || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.do_not_contact_select_reason }}
                    </span>
                  </div>
                </div>
                <div class="col-5 mt-48">
                  <div class="form-group"
                    *ngIf="corporateContactForm.controls.doNotContactReason.value =='Other'"
                    [class.has-error]="c['DoNotContactReasonOther'].errors && (c['DoNotContactReasonOther'].touched || formSubmitted)">
                    <label>Reason <sup>*</sup></label>
                    <input type="text" class="form-control" placeholder="Enter Do Not Contact Reason"
                      formControlName="DoNotContactReasonOther" autocomplete="doNotAutoComplete" id="DoNotContactReasonOtherId">
                    <span class="field-message text-danger"
                      *ngIf="c['DoNotContactReasonOther'].errors?.required && (c['DoNotContactReasonOther'].touched || formSubmitted)">
                      <em class="icon icon-error mr-4"></em>
                      {{ errorData?.do_not_contact_enter_reason }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row gutter-16">

            <div class="col-7">
              <div class="row ">

                <div class="col-6">
                  <div class="form-group">
                    <label for="" class="mb-10">Preferred Contact Method <sup *ngIf="!corporateContactForm.value.doNotContact">*</sup></label>
                    <fieldset [disabled]="corporateContactForm.controls.doNotContact.value">
                      <div class="custom-control custom-radio pr-0">
                        <input type="radio" id="customradio1" class="custom-control-input"
                          formControlName="preferredContactMethod" value="Cell">
                        <label class="custom-control-label" for="customradio1">Call</label>
                      </div>
                      <div class="custom-control custom-radio pr-0">
                        <input type="radio" id="customradi31" class="custom-control-input"
                          formControlName="preferredContactMethod" value="Email">
                        <label class="custom-control-label" for="customradi31">Email</label>
                      </div>
                      <div class="custom-control custom-radio pr-0" *ngIf="userInfo?.tenantTier?.tierName != tenantTier.Emerging">
                        <input type="radio" id="customradio2" class="custom-control-input"
                          formControlName="preferredContactMethod" value="Text">
                        <label class="custom-control-label" for="customradio2">Text</label>
                      </div>
                      <span class="text-danger" *ngIf="c['preferredContactMethod'].errors?.required && formSubmitted">
                        <em class="icon icon-error mr-4"></em>
                        {{ errorData?.potential_client_preferred_contact_method }}
                      </span>
                    </fieldset>
                  </div>
                </div>
                <div class="col-6">
                  <fieldset [disabled]="corporateContactForm.controls.doNotContact.value">
                    <div class="form-group">
                      <label for="" class="mb-15">Automatic Notifications</label>
                      <div class="custom-control custom-checkbox pr-0">
                        <input type="checkbox" id="customcheckbox21" name="customcheckbox" class="custom-control-input"
                          value="true" formControlName="notifyEmail">
                        <label class="custom-control-label" for="customcheckbox21">Email</label>
                      </div>
                      <div class="custom-control custom-checkbox pr-0" *ngIf="userInfo?.tenantTier?.tierName != tenantTier.Emerging">
                        <input type="checkbox" id="customcheckbox3" name="customcheckbox" class="custom-control-input"
                          formControlName="notifySMS">
                        <label class="custom-control-label" for="customcheckbox3">Text</label>
                      </div>
                    </div>
                  </fieldset>
                </div>

              </div>
            </div>

          </div>
      </div>

      <div class="">
          <h2 class="mb-24">Next Action</h2>
          <div class="row gutter-16">
            <div class="col-12">
              <p class="mb-20">Are there any pending next actions on this client that impact the initial
                consultations?
              </p>
            </div>
          </div>
          <div class="custom-control custom-radio">
            <input type="radio" con id="next_act_1" class="custom-control-input" value="no"
              formControlName="initialConsultations" (change)="setValidatorNextActionFields()">
            <label class="custom-control-label" for="next_act_1">No</label>
          </div>
          <div class="custom-control custom-radio">
            <input type="radio" id="next_act_2" class="custom-control-input" value="yes"
              formControlName="initialConsultations" (change)="setValidatorNextActionFields()">
            <label class="custom-control-label" for="next_act_2">Yes</label>
          </div>
          <div *ngIf="corporateContactForm?.value?.initialConsultations === 'yes'">
            <div class="row gutter-16">
              <div class="col-4">
                <div class="form-group" [class.has-error]="c['nextActionDate'].errors && formSubmitted">
                  <label>Next Action Date <sup>*</sup></label>
                  <app-date-picker [isForm]='true' [dateform]='corporateContactForm' controlName='nextActionDate' id="nextActionDateId">
                  </app-date-picker>
                  <span class="field-message text-danger d-flex align-items-start" *ngIf="formSubmitted && c['nextActionDate'].errors?.required">
                    <em class="icon icon-error mr-4 mt-0"></em>
                    Please select date.
                  </span>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="form-group" [class.has-error]="c['nextActionNote'].errors && formSubmitted">
                  <label>Next Action Notes <sup>*</sup></label>
                  <textarea class="form-control" rows="4" placeholder="Enter Notes"
                    formControlName="nextActionNote" id="nextActionNoteId"></textarea>
                  <span class="field-message text-danger d-flex align-items-start" *ngIf="formSubmitted && c['nextActionNote'].errors?.required">
                    <em class="icon icon-error mr-4 mt-0"></em>
                    Please enter notes.
                  </span>
                </div>
              </div>
            </div>
          </div>
      </div>
    </form>
  </div>

</div>

<ng-template #AddCorporateContact let-modal>
  <div class="modal-header pb-32 d-block">
    <h3 class="modal-title mb-0">{{editDetails?.isEdit ? 'Edit' : 'Add'}} Corporate Contact</h3>
    <button type="button" class="close" (click)="modal.dismiss('Cross click')" aria-label="Close" id="close-btn">
      <em class="icon icon-close"></em>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group" *ngIf="!editDetails?.isEdit">
      <div class="custom-control custom-radio">
        <input type="radio" id="customRadio1" name="customRadio" class="custom-control-input" [(ngModel)]="createType"
          value="create" (change)="clearVendorForm()">
        <label class="custom-control-label" for="customRadio1">Create new Corporate Contact</label>
      </div>
      <div class="custom-control custom-radio">
        <input type="radio" id="customRadio2" name="customRadio" class="custom-control-input" [(ngModel)]="createType"
          value="existing" (change)="clearVendorForm()">
        <label class="custom-control-label" for="customRadio2">Select from existing Corporate Contact</label>
      </div>
    </div>
    <form [formGroup]="vendorForm" *ngIf="createType === 'create'">
      <div class="row gutter-16">
        <div class="col-4">
          <div class="form-group">
            <label>Contact Number</label>
            <input type="text" class="form-control" formControlName="uniqueNumber" [readOnly]="true" id="uniqueNumberId">
          </div>
        </div>
        <div class="col-4">
          <div class="form-group"
            [class.has-error]="v['firstName'].errors && (v['firstName'].touched || vendorFormSubmitted)">
            <label>First Name <sup>*</sup></label>
            <input type="text" class="form-control" placeholder="First name" formControlName="firstName" autocomplete="doNotAutoComplete" id="firstNameId">
            <span class="field-message text-danger"
              *ngIf="v['firstName'].errors?.required && (v['firstName'].touched || vendorFormSubmitted)">
              <em class="icon icon-error mr-4"></em>
              {{ errorData?.first_name_error }}
            </span>
          </div>
        </div>
        <div class="col-4">
          <div class="form-group"
            [class.has-error]="v['lastName'].errors && (v['lastName'].touched || vendorFormSubmitted)">
            <label>Last Name <sup>*</sup></label>
            <input type="text" class="form-control" placeholder="Last name" formControlName="lastName" autocomplete="doNotAutoComplete" id="lastNameId">
            <span class="field-message text-danger"
              *ngIf="v['lastName'].errors?.required && (v['lastName'].touched || vendorFormSubmitted)">
              <em class="icon icon-error mr-4"></em>
              {{ errorData?.last_name_error }}
            </span>
          </div>
        </div>
        <div class="col-6">
          <div
            [class.has-error]="(v['email'].errors && (v['email'].touched || vendorFormSubmitted)) || emailExistenceForCorporateContact">
            <label>Email Address <sup>*</sup></label>
            <input type="email" name="email" formControlName="email" class="form-control"
                   (blur)="checkEmailExistenceForCorporateContact()"
                   placeholder="Email Address"
              value="Email Address" autocomplete="doNotAutoComplete" id="emailId">
            <span class="field-message text-danger"
              *ngIf="v['email']?.errors?.pattern && (v['email'].touched || vendorFormSubmitted)"><em
                class="icon icon-error mr-4"></em>
              {{ errorData?.email_not_valid  }}
            </span>
            <span class="field-message text-danger"
              *ngIf="v['email']?.errors?.required && (v['email'].touched || vendorFormSubmitted)"><em
                class="icon icon-error mr-4"></em>
              {{ errorData?.potential_client_email_required  }}
            </span>

            <span class="field-message text-danger" *ngIf="emailExistenceForCorporateContact">
              <em class="icon icon-error mr-4"></em>
              {{ errorData?.potential_client_email_in_use }}
            </span>
          </div>
        </div>
        <div class="col-6">
          <div class="form-group">
            <label>Job Title</label>
            <input type="text" class="form-control" placeholder="Job Title" formControlName="jobTitle" autocomplete="doNotAutoComplete" id="jobTitleId">
          </div>
        </div>
        <div class="col-6">
          <div class="form-group"
            [class.has-error]="v['primaryPhoneNumber'].errors && (v['primaryPhoneNumber'].touched || vendorFormSubmitted)">
            <label>Primary Phone<sup>*</sup></label>
            <input type="text" class="form-control" mask="(000) 000-0000" placeholder="(###) ###-####"
              formControlName="primaryPhoneNumber" autocomplete="doNotAutoComplete" id="primaryPhoneNumberId"/>
            <span class="field-message text-danger"
              *ngIf="v['primaryPhoneNumber'].errors?.required && (v['primaryPhoneNumber'].touched || vendorFormSubmitted)">
              <em class="icon icon-error mr-4"></em>
              {{ errorData?.potential_client_corporate_contact_phone }}
            </span>
            <span class="field-message text-danger"
              *ngIf="!v['primaryPhoneNumber'].errors?.required && (v['primaryPhoneNumber'].touched || vendorFormSubmitted)">
              <em class="icon icon-error mr-4"></em>
              {{ errorData?.invalid_phone }}
            </span>
          </div>
        </div>
        <div class="col-6">
          <div [ngClass]="(vendorForm.controls.cellPhoneNumber.invalid)?'form-group has-error':'form-group'">
            <label>Cell Phone</label>
            <input type="text" class="form-control" mask="(000) 000-0000" [showMaskTyped]="true"
              placeHolderCharacter=" " formControlName="cellPhoneNumber" autocomplete="doNotAutoComplete" id="cellPhoneNumberId"/>
            <span class="field-message text-danger" *ngIf="vendorForm.controls.cellPhoneNumber.invalid"><em
                class="icon icon-error mr-4"></em>
                {{ errorData?.invalid_phone }}
            </span>
          </div>
        </div>
        <div class="col-12">
          <div class="form-group mb-0">
            <label class="mb-12">Role(s) <sup>*</sup></label>
            <p class="lh-20 mb-16">There must be exactly one (1) Primary Contact and Billing Contact per client.
              Multiple General Counsels are permitted.</p>
            <div class="custom-control custom-checkbox">
              <fieldset>
                <input type="checkbox" class="custom-control-input" id="customCheck1" formControlName="isPrimary">
                <label class="custom-control-label" for="customCheck1">Primary Contact</label>
              </fieldset>
            </div>
            <div class="custom-control custom-checkbox">
              <fieldset>
                <input type="checkbox" class="custom-control-input" id="customCheck2" formControlName="isBilling">
                <label class="custom-control-label" for="customCheck2">Billing Contact</label>
              </fieldset>
            </div>
            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" id="customCheck3" formControlName="isGeneralCounsel">
              <label class="custom-control-label" for="customCheck3">General Counsel</label>
            </div>
            <span class="field-message text-danger d-block"
              [ngClass]="!(vendorForm.value.isBilling  && vendorForm.value.isPrimary && vendorForm.value.isGeneralCounsel) ? 'd-block' : ''"
              *ngIf="!vendorForm.value.isBilling  && !vendorForm.value.isPrimary && !vendorForm.value.isGeneralCounsel && vendorFormSubmitted"><em
                class="icon icon-error mr-4"></em>
              {{ errorData?.select_potential_corporate_role }}
            </span>
          </div>
        </div>
      </div>
    </form>
    <div *ngIf="createType === 'existing'">
      <app-corporate-search (selectedAssociation)='onSelect($event)'
                            [hideHeading]="true"
                            [placeHolderData]="'Search Corporate Contact'"
                            [errCorporateExistinig]="existingSelected">
      </app-corporate-search>
      <form [formGroup]="roleForm">
        <div class="col-12">
          <div class="form-group mb-0">
            <label class="mb-12">Role(s) <sup>*</sup></label>
            <p class="lh-20 mb-16">There must be exactly one (1) Primary Contact and Billing Contact per client.
              Multiple General Counsels are permitted.</p>
            <div class="custom-control custom-checkbox">
              <fieldset>
                <input type="checkbox" class="custom-control-input" id="customCheck1" formControlName="isPrimary">
                <label class="custom-control-label" for="customCheck1">Primary Contact</label>
              </fieldset>
            </div>
            <div class="custom-control custom-checkbox">
              <fieldset>
                <input type="checkbox" class="custom-control-input" id="customCheck2" formControlName="isBilling">
                <label class="custom-control-label" for="customCheck2">Billing Contact</label>
              </fieldset>
            </div>
            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" id="customCheck3" formControlName="isGeneralCounsel">
              <label class="custom-control-label" for="customCheck3">General Counsel</label>
            </div>
            <span class="field-message text-danger d-block"
              *ngIf="vendorFormSubmitted && !roleForm.value.isBilling  && !roleForm.value.isPrimary && !roleForm.value.isGeneralCounsel"><em
                class="icon icon-error mr-4"></em>
                {{ errorData?.select_potential_corporate_role }}
            </span>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light"
            (click)="modal.dismiss('Cross click'); emailExistenceForCorporateContact = false" id="cancel-btn">Cancel</button>
    <button type="button" class="btn btn-primary" [disabled]="emailExistence"
      (click)="saveCorporateContact(MissingContactPopup)" id="save-corporate-contact">Save</button>
  </div>
</ng-template>


<ng-template #MissingContactPopup let-modal>
  <div class="modal-header d-block pb-24">
    <h3 class="modal-title mb-0">Existing Corporate Contact Details</h3>
    <button type="button" class="close" (click)="modal.dismiss('Cross click')" aria-label="Close" id="close-btn">
      <em class="icon icon-close"></em>
    </button>
  </div>
  <div class="modal-body">
    <div class="alert alert-danger d-flex justify-content-between mb-24">
      <div class="d-flex">
        <em class="alert-icon icon icon-error icon-danger"></em>
        <div class="d-flex align-items-center flex-wrap">
          <h4 class="mr-20 mt-0 mb-0">Missing Contact Information</h4>
          All Corporate Contact roles require an email address and phone number.
        </div>
      </div>
    </div>
    <p class="lh-20">Please provide an email address and phone number for this Corporate Contact. This information will
      automatically update this Corporate Contact's details across the system.</p>
    <p class="lh-20"> If you choose not to provide this information, you can not return to the workflow and make
      changes, or cancel entirely.</p>
  </div>
  <form [formGroup]="missingInfoForm">
    <div class="row gutter-16">
      <div class="col-6">
        <div class="form-group"
          [class.has-error]="(missingInfoForm.controls['email'].errors && (missingInfoForm.controls['email'].touched || missingInfoFormSubmitted)) || emailExistence">
          <label>Email Address<sup>*</sup></label>
          <input type="text" class="form-control" (blur)="checkEmailExistence()"
                 placeholder="Email address" formControlName="email"
                 autocomplete="doNotAutoComplete" id="emailId">
          <span class="field-message text-danger"
            *ngIf="missingInfoForm.controls['email'].errors?.pattern && (missingInfoForm.controls['email'].touched || missingInfoFormSubmitted)"><em
              class="icon icon-error mr-4"></em>
            {{ errorData?.email_not_valid }}
          </span>
          <span class="field-message text-danger" *ngIf="emailExistence">
            <em class="icon icon-error mr-4"></em>
            {{ errorData?.potential_client_email_in_use }}
          </span>
          <span class="field-message text-danger"
            *ngIf="missingInfoForm.controls['email'].errors?.required && (missingInfoForm.controls['email'].touched || missingInfoFormSubmitted)"><em
              class="icon icon-error mr-4"></em>
            {{ errorData?.email_required }}
          </span>
        </div>
      </div>
      <div class="col-6">
        <div class="form-group"
          [class.has-error]="missingInfoForm.controls['primaryPhoneNumber'].errors && (missingInfoForm.controls['primaryPhoneNumber'].touched || missingInfoFormSubmitted)">
          <label>Phone Number<sup>*</sup></label>
          <input type="text" class="form-control" mask="(000) 000-0000" placeholder="(###) ###-####"
            formControlName="primaryPhoneNumber" autocomplete="doNotAutoComplete" id="primaryPhoneNumberId">
          <span class="field-message text-danger"
            *ngIf="missingInfoForm.controls['primaryPhoneNumber'].errors?.required && (missingInfoForm.controls['primaryPhoneNumber'].touched || missingInfoFormSubmitted)"><em
              class="icon icon-error mr-4"></em>
              {{ errorData?.phone_required }}
          </span>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" (click)="modal.dismiss('Cross click')" class="btn btn-light" id="add-corporate-contact-cancel">Cancel</button>
      <button type="button" class="btn btn-outline-primary"
        (click)="returnToWorkflow(AddCorporateContact,'lg','')">Return to Workflow</button>
      <button type="button" class="btn btn-primary" (click)="saveMissingInfo()" id="add-corporate-contact">Add Corporate Contact</button>
    </div>
  </form>
</ng-template>
